IF (ВыгружатьУслугиСвернутоПоНДС){	/*//вариант 1	ТЕКСТ_СВЕРНУТО = "<?xml version=""1.0"" encoding=""Windows-1251""?><ОТСТУП>3</ОТСТУП><ЗАПРОС>'SELECT ''" + _1С_ТОВАР_КОД + "''  AS Номенклатура, 															 SUM(kolp)											  AS Количество, 															 SUM(summa)/SUM(kolp)								  AS Цена, 															 SUM(summa)											  AS Сумма,															 (SELECT name FROM sprlistkodn WHERE code= spec.kodn) AS СтавкаНДС,															 0		 											  AS СуммаНДС												FROM spec050 spec WHERE ic= ' + РеализацияТоваровУслуг.identity_column + ' AND s_code&lt;&gt;'''' GROUP BY kodn'</ЗАПРОС>				<ВЫЧИСЛИТЬ/><ТЭГЗАГОЛОВКА>Услуги</ТЭГЗАГОЛОВКА><ТЭГСТРОКИ>Row</ТЭГСТРОКИ><ВЛАДЕЛЕЦ>РеализацияТоваровУслуг</ВЛАДЕЛЕЦ><ИМЯКОНТЕКСТА>Спецификация</ИМЯКОНТЕКСТА>";	*/	//вариант 2	ТЕКСТ_СВЕРНУТО = "<?xml version=""1.0"" encoding=""Windows-1251""?><ОТСТУП>3</ОТСТУП><ЗАПРОС>'SELECT ''" + _1С_ТОВАР_КОД + "''  AS Номенклатура, 															 SUM(summa) - 															 ROUND( SUM( summa * ( SELECT CASE WHEN kodn.proc_ = 18 THEN 20 ELSE kodn.proc_ END AS proc_n from sprkodn kodn WHERE kodn.code = spec.kodn ) / 																	( 100 + ( SELECT CASE WHEN kodn.proc_ = 18 THEN 20 ELSE kodn.proc_ END AS proc_n from sprkodn kodn WHERE kodn.code = spec.kodn ) ) ), 2 )		AS Количество, 															 SUM(summa)/ (SUM(summa) - 															 ROUND( SUM( summa * ( SELECT CASE WHEN kodn.proc_ = 18 THEN 20 ELSE kodn.proc_ END AS proc_n from sprkodn kodn WHERE kodn.code = spec.kodn ) / 																	( 100 + ( SELECT CASE WHEN kodn.proc_ = 18 THEN 20 ELSE kodn.proc_ END AS proc_n from sprkodn kodn WHERE kodn.code = spec.kodn ) ) ), 2 )		AS Цена, 															 SUM(summa)											  AS Сумма,															 (SELECT name FROM sprlistkodn WHERE code= spec.kodn) AS СтавкаНДС,															 ROUND( ( summa * ( SELECT CASE WHEN kodn.proc_ = 18 THEN 20 ELSE kodn.proc_ END AS proc_n from sprkodn kodn WHERE kodn.code = spec.kodn ) / ( 100 + ( SELECT CASE WHEN kodn.proc_ = 18 THEN 20 ELSE kodn.proc_ END AS proc_n from sprkodn kodn WHERE kodn.code = spec.kodn ) ) ), 2 ))		AS СуммаНДС												FROM spec050 spec WHERE ic= ' + РеализацияТоваровУслуг.identity_column + ' AND s_code&lt;&gt;'''' GROUP BY kodn'</ЗАПРОС>				<ВЫЧИСЛИТЬ/><ТЭГЗАГОЛОВКА>Услуги</ТЭГЗАГОЛОВКА><ТЭГСТРОКИ>Row</ТЭГСТРОКИ><ВЛАДЕЛЕЦ>РеализацияТоваровУслуг</ВЛАДЕЛЕЦ><ИМЯКОНТЕКСТА>Спецификация</ИМЯКОНТЕКСТА>";					RETURN ТЕКСТ_СВЕРНУТО;}ТЕКСТ = "<?xml version=""1.0"" encoding=""Windows-1251""?><ОТСТУП>3</ОТСТУП><ЗАПРОС>'SELECT (SELECT maincode FROM sprres WHERE code= spec.s_code ) 	  AS Номенклатура, 															 kolp 												  AS Количество, 															 cena 												  AS Цена, 															 summa 												  AS Сумма,															 (SELECT name FROM sprlistkodn WHERE code= spec.kodn) AS СтавкаНДС,															 0		 											  AS СуммаНДС												FROM spec050 spec WHERE ic= ' + РеализацияТоваровУслуг.identity_column + " + '"' + " AND s_code&lt;&gt;''" + '"' +"</ЗАПРОС>				<ВЫЧИСЛИТЬ/><ТЭГЗАГОЛОВКА>Услуги</ТЭГЗАГОЛОВКА><ТЭГСТРОКИ>Row</ТЭГСТРОКИ><ВЛАДЕЛЕЦ>РеализацияТоваровУслуг</ВЛАДЕЛЕЦ><ИМЯКОНТЕКСТА>Спецификация</ИМЯКОНТЕКСТА>";RETURN ТЕКСТ;

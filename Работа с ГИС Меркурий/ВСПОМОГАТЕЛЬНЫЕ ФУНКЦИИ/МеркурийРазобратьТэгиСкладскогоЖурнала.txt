IF ( ТипТэга == "КОНЕЦАТРИБУТОВ" ){	IF ( Имя == "vd:stockEntry" )	{		ДОБАВИТЬСТРОКИ( 1, "СкладскойЖурнал" );		currentState		= "stockEntry";		currentsubstate		= "";	}	ELSE IF ( currentState == "stockEntry" AND Имя == "vd:batch" )	{		currentState		= "product";		currentsubstate		= "";		product				= "";	}	ELSE IF ( currentState == "stockEntry" AND Имя == "vd:vetDocument" )	{		currentState		= "vetDocument";		currentsubstate		= "";	}	ELSE IF ( currentState == "product" AND Имя != "bs:uuid" )	{		product				+= "<" + Имя + АТРИБУТЫ + ">";		IF ( Имя == "vd:dateOfProduction" )		{			currentsubstate	= "dateOfProduction";			origin_date		+= "<" + Имя + АТРИБУТЫ + ">";		}		ELSE IF ( Имя == "vd:expiryDate" )		{			currentsubstate	= "expiryDate";			expiry_date		+= "<" + Имя + АТРИБУТЫ + ">";		}		ELSE IF ( currentState == "product" AND Имя == "vd:product" )			currentsubstate		= "product";		ELSE IF ( currentState == "product" AND Имя == "vd:subProduct" )			currentsubstate		= "subProduct";		ELSE IF ( currentState == "product" AND Имя == "vd:productItem" )			currentsubstate		= "productItem";		ELSE IF ( currentState == "product" AND Имя == "vd:unit" )			currentsubstate		= "unit";		ELSE IF ( currentState == "product" AND Имя == "vd:origin" )			currentsubstate		= "origin";		ELSE IF ( currentState == "product" AND currentsubstate == "dateOfProduction" )			origin_date		+= "<" + Имя + АТРИБУТЫ + ">";		ELSE IF ( currentState == "product" AND currentsubstate == "expiryDate" )			expiry_date		+= "<" + Имя + АТРИБУТЫ + ">";	}	ELSE IF ( currentState == "origin" AND Имя == "vd:producer" )		currentsubstate		= "originproducer";	ELSE IF ( currentState == "origin" AND Имя == "vd:country" )		currentsubstate		= "origincountry";	ELSE IF ( currentState == "origin" AND Имя == "vd:productItem" )		currentsubstate		= "originproductitem";			АТРИБУТЫ 				= "";}ELSE IF ( ТипТэга == "ТЭГ" AND ФлагЗакрытия ){	IF ( Имя == "vd:stockEntry" )	{		currentState		= "";		currentsubstate		= "";		product				= "";		origin_date			= "";		expiry_date			= "";		uuid				= "";		issueDate			= {};		issueNumber			= '';	}	ELSE IF ( Имя == "vd:entryNumber" )		REPLACE( "СкладскойЖурнал", "entryNumber", Значение );	ELSE IF ( currentState == "product" AND Имя == "vd:batch" )	{		currentState		= "stockEntry";		REPLACE( "СкладскойЖурнал", "product", product );	}	ELSE IF ( currentState == "vetDocument" AND Имя == "vd:vetDocument" )		currentState		= "stockEntry";	ELSE IF ( currentState == "stockEntry" AND Имя == "bs:guid" )		REPLACE( "СкладскойЖурнал", "guid", Значение );	ELSE IF ( currentState == "stockEntry" AND Имя == "bs:uuid" )		REPLACE( "СкладскойЖурнал", "uuid", Значение );	ELSE IF ( currentState == "stockEntry" AND Имя == "bs:status" )		REPLACE( "СкладскойЖурнал", "status", Значение );	ELSE IF ( currentState == "stockEntry" AND Имя == "bs:createDate" )		REPLACE( "СкладскойЖурнал", "createDate", CTOD( Значение, 7 ) );	ELSE IF ( currentState == "stockEntry" AND Имя == "bs:updateDate" )		REPLACE( "СкладскойЖурнал", "updateDate", CTOD( Значение, 7 ) );	ELSE IF ( currentState == "product" AND Имя != "bs:uuid" )	{		IF ( Имя == "vd:productType" )			REPLACE( "СкладскойЖурнал", "product_type", Значение );		ELSE IF ( Имя == "vd:volume" )			REPLACE( "СкладскойЖурнал", "productitem_volume", Значение );		ELSE IF ( currentsubstate == "product" AND Имя == "bs:guid" )			REPLACE( "СкладскойЖурнал", "product_guid", Значение );		ELSE IF ( currentsubstate == "subProduct" AND Имя == "bs:guid" )			REPLACE( "СкладскойЖурнал", "subproduct_guid", Значение );		ELSE IF ( ( currentsubstate == "productItem" OR currentsubstate == "originproductitem" ) AND Имя == "dt:name" )			REPLACE( "СкладскойЖурнал", "productitem_name", Значение );		ELSE IF ( ( currentsubstate == "productItem" OR currentsubstate == "originproductitem" ) AND Имя == "bs:guid" )			REPLACE( "СкладскойЖурнал", "productitem_guid", Значение );		ELSE IF ( ( currentsubstate == "productItem" OR currentsubstate == "originproductitem" ) AND Имя == "dt:globalID" )			REPLACE( "СкладскойЖурнал", "productitem_gtin", Значение );		ELSE IF ( ( currentsubstate == "productItem" OR currentsubstate == "originproductitem" ) AND Имя == "dt:code" )			REPLACE( "СкладскойЖурнал", "productitem_code", Значение );		ELSE IF ( currentsubstate == "unit" AND Имя == "bs:guid" )			REPLACE( "СкладскойЖурнал", "productitem_unit", Значение );		ELSE IF ( currentsubstate == "originproducer" AND Имя == "bs:guid" )			REPLACE( "СкладскойЖурнал", "productitem_producer", Значение );		ELSE IF ( currentsubstate == "origincountry" AND Имя == "bs:guid" )			REPLACE( "СкладскойЖурнал", "productitem_country", Значение );		ELSE IF ( currentState == "product" AND Имя == "vd:dateOfProduction" )		{			currentsubstate		= "";			origin_date			+= ЕГАИС.ЗаменитьСимволы( ALLTRIM( Значение ) ) + "</" + Имя + ">";			REPLACE( "СкладскойЖурнал", "origin_date", origin_date );		}		ELSE IF ( currentState == "product" AND Имя == "vd:expiryDate" )		{			currentsubstate		= "";			expiry_date			+= ЕГАИС.ЗаменитьСимволы( ALLTRIM( Значение ) ) + "</" + Имя + ">";			REPLACE( "СкладскойЖурнал", "expiry_date", expiry_date );		}		ELSE IF ( ( Имя == "vd:producer" OR Имя == "vd:country" OR Имя == "vd:productItem" ) AND LEFT( currentsubstate, 6 ) == "origin" )			currentsubstate		= "origin";		ELSE IF ( currentState == "product" AND currentsubstate == "dateOfProduction" )			origin_date			+= ЕГАИС.ЗаменитьСимволы( ALLTRIM( Значение ) ) + "</" + Имя + ">";		ELSE IF ( currentState == "product" AND currentsubstate == "expiryDate" )			expiry_date			+= ЕГАИС.ЗаменитьСимволы( ALLTRIM( Значение ) ) + "</" + Имя + ">";		ELSE IF ( Имя == "vd:product" OR Имя == "vd:subProduct" OR Имя == "vd:productItem" OR Имя == "vd:unit" )			currentsubstate		= "";		product					+= ЕГАИС.ЗаменитьСимволы( ALLTRIM( Значение ) ) + "</" + Имя + ">";	}}ELSE IF ( ТипТэга == "АТРИБУТ" )	АТРИБУТЫ				+= " " + Имя + "=""" + ЕГАИС.ЗаменитьСимволы( ALLTRIM( Значение ) ) + """";ELSE IF ( ТипТэга == "НАЧАЛОАТРИБУТОВ" )	АТРИБУТЫ				= "";

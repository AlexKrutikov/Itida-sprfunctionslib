Результат = 0;
СООБЩЕНИЕ(	"ИДЧЕКА = " + ИДЧЕКА + CHR(13) + CHR(10) +
			"_ОПЕРАЦИЯ = " + _ОПЕРАЦИЯ + CHR(13) + CHR(10) +
			"МЕСТОВЫЗОВА = " + МЕСТОВЫЗОВА, "отладка - скрипт начисления");
			
IF ( МЕСТОВЫЗОВА == "ЗАПИСЬБОНУСА" AND _ОПЕРАЦИЯ != "ВОЗВРАТ" AND _ОПЕРАЦИЯ != "ВОЗВРАТПРИХОДА" )
{
	IF ( !RESTAPI.LOCARDS_СовершениеПокупки( ИДЧЕКА, НОМЕРКАРТЫ, ВСЕГОБОНУСОВ ) )
		СООБЩЕНИЕ("Не удалось провести операцю продажи в системе Locards", "LOCARDS");		
}
ELSE IF	( МЕСТОВЫЗОВА == "ЗАПИСЬБОНУСА" AND ( _ОПЕРАЦИЯ == "ВОЗВРАТ" OR _ОПЕРАЦИЯ == "ВОЗВРАТПРИХОДА" ) )
{	
	IF ( !RESTAPI.Locards_УдалениеПокупкиПоИдентификатору( ИДЧЕКА, НОМЕРКАРТЫ ) )
		СООБЩЕНИЕ("Не удалось удалить операцю продажи в системе Locards", "LOCARDS");			
}
ELSE IF ( МЕСТОВЫЗОВА == "РАСЧЕТНАЧИСЛЕНИЙ" )
	Результат = RESTAPI.LOCARDS_КоличествоБонусов( НОМЕРКАРТЫ, "" );
ELSE IF ( МЕСТОВЫЗОВА == "РАСЧЕТСКИДКИ" )
	Результат = 0;
	
RETURN Результат;

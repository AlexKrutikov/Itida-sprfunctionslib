//Проверим возраст буфера чеков
ВозврастБуфераДней			= 0;
НеВыводитьСообщение			= ЕСЛИ( ПУСТО( НеВыводитьСообщение ), false, НеВыводитьСообщение );

ОтветСостояниеККТ = ФР.МЕРКУРИЙФР_ПолучениеСостоянияККТ();
		
IF ( !ПУСТО( ОтветСостояниеККТ ) )
{
	ЗАГРУЗИТЬJSON("НеотправленныеДокументы", ПОЛЕ_JSON( ПОЛЕ_JSON( ОтветСостояниеККТ, "fnInfo", "" ), "unsignedDocs", "") );
	IF ( КОЛИЧЕСТВОСТРОК("НеотправленныеДокументы") == 0 ) RETURN ВозврастБуфераДней;
	КоличествоНеотправленных 	= НеотправленныеДокументы.qty;
	IF ( КоличествоНеотправленных > 0 )
	{
		ДатаПервогоНеотправленного	= CTOD( НеотправленныеДокументы.firstDateTime,0 );
		ТекущаяДата 			= ДАТА( );
		ВозврастБуфераДней 		= АБСОЛЮТНОЕЗНАЧЕНИЕ( ЧИСЛО( РАЗНИЦАДАТ( ТекущаяДата, ДатаПервогоНеотправленного, 'day' ) ) );
	
		IF ( !НеВыводитьСообщение && ВозврастБуфераДней >= _КРИТИЧНЫЙВОЗРАСТБУФЕРАЧЕКОВ )
		{
			СООБЩЕНИЕ( "Чеки не отправляются в ОФД в течение " + ВозврастБуфераДней + " дней.", "ВНИМАНИЕ!!!" );
		}
	}
	УДАЛИТЬКОНТЕКСТ("НеотправленныеДокументы");
}
//конец проверки возраста буфера чеков
RETURN ВозврастБуфераДней;

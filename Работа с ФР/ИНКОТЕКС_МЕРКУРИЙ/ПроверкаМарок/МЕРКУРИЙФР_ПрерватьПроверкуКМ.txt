//подключаемся к ККТ
IF ( !ФР.МЕРКУРИЙФР_ОткрытьСессию( КОДОБОРУДОВАНИЯ, "Прерывание проверки КМ" ) ) RETURN false;

Команда = ДАННЫЕ_JSON("command", "AbortMarkingCodeChecking");
ТекстЗапроса = "{ ""sessionKey"": """ + _МАССИВКЛЮЧЕЙФР[ VAL( ФР.КОДОБОРУДОВАНИЯ() ) ] + """, " + Команда + " }";

ОТВЕТ = "";

IF ( !ФР.МЕРКУРИЙФР_HTTPPOST( ФР.МЕРКУРИЙФР_АДРЕССЕРВЕРА(), "/api.json", ТекстЗапроса, "", @ОТВЕТ ) )
{
	ФР.МЕРКУРИЙФР_ЗакрытьСессию( ФР.КОДОБОРУДОВАНИЯ(), "Прерывание проверки КМ" );
	УДАЛИТЬКОНТЕКСТ("НовыеКомандыЧека");
	УДАЛИТЬКОНТЕКСТ("ПозицииЧека");
	RETURN false;
}

RETURN ОТВЕТ;

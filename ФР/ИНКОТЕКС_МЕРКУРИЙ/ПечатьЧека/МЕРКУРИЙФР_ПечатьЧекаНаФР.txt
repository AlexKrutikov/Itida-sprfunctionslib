//"ПечатьЧекаНаФР" - функция, которая будет заниматься формирование чека в формате JSON для его последующей отправки в ККМ

//Пробъем на ККМ итоговый чек
РезультатПечатиЧека = ФР.МЕРКУРИЙФР_ФискализироватьЧек( );

//если печать завершилась ошибкой, то предложим повторить печать
WHILE ( !РезультатПечатиЧека )
{
	СообщениеПользователю 	= "Чек не завершен в ККМ." + CHR( 13 ) + "Повторить печать чека?";
	КодОтвета 				= СООБЩЕНИЕ( СообщениеПользователю, "Ошибка печати чека", 5 );
	IF ( КодОтвета == 4 ) //если нажали "Повторить"
	{
		РезультатПечатиЧека = ФР.МЕРКУРИЙФР_ФискализироватьЧек( ); //повторим печать чека
	}
	ELSE //если нажали "Отмена"
	{
		РезультатПечатиЧека	= false;
		BREAK;
	}
}
//конец повтора печати чека

IF ( !РезультатПечатиЧека )
{
	_ОШИБКАВЫПОЛНЕНИЯ		= true;
	// Удаляем временную таблицу
	ЗАПРОС( "DROP TABLE " + ИмяТаблицыСтрокЧека );
	RETURN false;
}
		
// Удаляем временную таблицу
ЗАПРОС( "DROP TABLE " + ИмяТаблицыСтрокЧека );

RETURN true;

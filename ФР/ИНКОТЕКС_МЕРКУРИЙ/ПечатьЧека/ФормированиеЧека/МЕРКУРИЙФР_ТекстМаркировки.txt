//Маркировка

markingCode 	= "";

IF (TYPE ("_ККТПЕРЕДАВАТЬПОЛНЫЙКОДМАРКИРОВКИ") == "U")
	_ККТПЕРЕДАВАТЬПОЛНЫЙКОДМАРКИРОВКИ = false; //признак необходимости передавать весь код маркировки в составе реквизитов чека
	
ШтрихкодМаркировкиДляЧека = ШКМарки;
	
IF ( _ККТПЕРЕДАВАТЬПОЛНЫЙКОДМАРКИРОВКИ == false	)
{
	ДлинаКодаМаркировки = 0;
	gtin = "";
	serial = "";
	ДлинаКодаМаркировки = ФР.ПолучитьДлиннуШтрихкодаМаркировки(ШКМарки, КомандыЧека.marktype, gtin, serial);
	
	IF ( ДлинаКодаМаркировки > 0 )
		ШтрихкодМаркировкиДляЧека = LEFT( ШКМарки, ДлинаКодаМаркировки );
}
						
markingCode = ФР.XMLTRANS( ALLTRIM( ШтрихкодМаркировкиДляЧека ) );
	
RETURN markingCode;

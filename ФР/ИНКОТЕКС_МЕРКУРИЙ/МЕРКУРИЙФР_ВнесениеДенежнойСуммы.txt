// Внесение наличных

// Параметры - 
// Сумма число вещественное, сумма вносимых наличных денег.
IF ( !ФР.МЕРКУРИЙФР_ОткрытьСессию( КОДОБОРУДОВАНИЯ, "Внесение наличных" ) ) RETURN false;
_ИМЯКАССИРА = ПЕРЕКОДИРОВАТЬ( ЗАПРОС( "SELECT name, inn FROM sprempl WHERE code = '" + froperator + "'", "name" ), "ANSI", "UTF-8" );
_ИННКАССИРА = ЗАПРОС( "", "inn" );

//sessionKey = ДАННЫЕ_JSON("sessionKey", ALLTRIM(_КЛЮЧ_СЕССИИ) );
Команда = ДАННЫЕ_JSON("command", "BringMoney");

КоэффициентСумм = 100;
ТекстЗапроса = "{
	""sessionKey"": """ + _КЛЮЧ_СЕССИИ  + """,
	" + Команда + ",
	""cash"": " + СТРОКА( Сумма * КоэффициентСумм, 16, 0 ) + ",
	""cashierInfo"": {
		""cashierName"": """ + _ИМЯКАССИРА + """,
		""cashierINN"": """ + _ИННКАССИРА + """
	}
}
";

ОТВЕТ = "";

IF ( !ФР.МЕРКУРИЙФР_HTTPPOST(ФР.МЕРКУРИЙФР_АДРЕССЕРВЕРА(), "/api.json", ТекстЗапроса, "", @ОТВЕТ) )
	RETURN false;
		
RETURN ФР.МЕРКУРИЙФР_ЗакрытьСессию( КОДОБОРУДОВАНИЯ, "Внесение наличности" );

//Проверим возраст буфера чеков
ВозврастБуфераДней			= 0;
НеВыводитьСообщение			= ЕСЛИ( ПУСТО( НеВыводитьСообщение ), false, НеВыводитьСообщение );
ТекстЗапросаИнфоОбменаОФД 	= "
{
	""type"": ""ofdExchangeStatus""
}";

fptr.setParam( fptr.LIBFPTR_PARAM_JSON_DATA, ТекстЗапросаИнфоОбменаОФД );
fptr.processJson( );
		
IF ( fptr.errorCode( ) == 0 )
{
	ОтветИнфоОбменаОФД 			= fptr.getParamString( fptr.LIBFPTR_PARAM_JSON_DATA );			
	ЗАГРУЗИТЬJSON("ДанныеОбменаОФД", ПОЛЕ_JSON( ОтветИнфоОбменаОФД, "status", "" ) );
	КоличествоНеотправленных 	= ДанныеОбменаОФД.notSentCount;
	ДатаПервогоНеотправленного	= CTOD( ДанныеОбменаОФД.notSentFirstDocDateTime,0 );
	IF ( КоличествоНеотправленных > 0 )
	{
		ТекущаяДата 			= ДАТА( );
		ВозврастБуфераДней 		= АБСОЛЮТНОЕЗНАЧЕНИЕ( ЧИСЛО( РАЗНИЦАДАТ( ТекущаяДата, ДатаПервогоНеотправленного, 'day' ) ) );
	
		IF ( !НеВыводитьСообщение && ВозврастБуфераДней >= _КРИТИЧНЫЙВОЗРАСТБУФЕРАЧЕКОВ )
		{
			СООБЩЕНИЕ( "Чеки не отправляются в ОФД в течение " + ВозврастБуфераДней + " дней.", "ВНИМАНИЕ!!!" );
		}
	}
	УДАЛИТЬКОНТЕКСТ("ДанныеОбменаОФД");
}
//конец проверки возраста буфера чеков
RETURN ВозврастБуфераДней;

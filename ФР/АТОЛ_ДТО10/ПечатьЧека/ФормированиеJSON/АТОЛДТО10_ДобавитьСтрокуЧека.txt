//Функция "ДобавитьСтрокуЧека" - добавляет фискальную или нефискальную строку к строкам чека
//Параметры:
//	ПозицииЧека (строка) - фискальные и/или нефискальные позиции чека
//	ДобавляемаяСтрока (строка) - новая строка, добавляемая к чеку. Для нефискальной строки передается значение текста, отправляемого на печать
//	ФискальнаяСтрока (Логическое) - признак фискальной строки (товароной позиции)
//	ТипСтроки (строка) - определяет какой тип строки передан. Данной функцией обрабатывается самостоятельное формирование объекта только для нефискальной строки, остальные типы строк добавляются как есть.
//														Значения:
//															position - фискальная строка
//															text - текстовая строка
//															barcode - штрихкод
//															и т.д. согласно описанию типов позиций в JSON заданиях в документации integration.atol.ru
//	Выравнивание (строка) - выравнивание для нефискальной строки 
//														Значения:
//															left - по левому краю 
//															center - по центру 
//															right - по правому краю
//	Перенос (строка) - перенос текста для нефискальных строк
//														Значения:
//															none - не переносить, обрезать по ширине ленты 
//															chars - посимвольный перенос 
//															words - перенос по словам 
//															Порядок переноса строк:
//															Строка разбивается на подстроки в соответствии с переносами в строке (\n, \r\n, \r)
//															Каждая подстрока разбивается на более мелкие подстроки в соответствии с wrap
//
//	ШрифтТекста (число) - номер шрифта из ККМ (Зависит от модели ККТ)	по умолчанию - 0
//
IF ( !ФискальнаяСтрока AND ТипСтроки == "text" )
{
	НоваяСтрока = "
		{
		""type"": ""text"",
		""text"": """ + ФР.XMLTRANS(ДобавляемаяСтрока) + """,
		""alignment"": """ + Выравнивание + """,
		""wrap"": """ + Перенос + """,
		""font"": " + VAL(ШрифтТекста) + "
		}";
	ПозицииЧека = ПозицииЧека + ЕСЛИ(!ПУСТО(ПозицииЧека),",","") + НоваяСтрока;
}
ELSE
{
	ПозицииЧека = ПозицииЧека + ЕСЛИ(!ПУСТО(ПозицииЧека),",","") + ДобавляемаяСтрока;		
}
RETURN ПозицииЧека;

АдресСервераСМС = "https://sms.ru";
АдресРесурса = "sms/send?api_id=<api_id>&to=<phones>&msg=<message>&from=<from>&json=1";

IF (TYPE("_СМСРУТОКЕН") == "C")
	ЛОГИН = _СМСРУТОКЕН;
ELSE
{
	СООБЩЕНИЕ("Необходимо создать константу _СМСРУТОКЕН и указать в ней ключ API для сервиса SMS.RU");
	RETURN false;
}

IF (ПУСТО(ЛОГИН))
{
	СООБЩЕНИЕ("Не указан ключ API для аккаунта SMS.RU (Константа _СМСРУТОКЕН)");
}
ELSE
{
	АдресРесурса = STRTRANC(АдресРесурса,"<api_id>",ЛОГИН);
}

IF (ПУСТО(НОМЕРАКЛИЕНТОВ))
{
	СООБЩЕНИЕ("Не указаны адреса для отправки СМС");
	RETURN false;
}
ELSE
{
	АдресРесурса = STRTRANC(АдресРесурса,"<phones>",НОМЕРАКЛИЕНТОВ);
}

IF (ПУСТО(ТЕКСТСООБЩЕНИЯ))
{
	СООБЩЕНИЕ("Не указан текст сообщения для отправки");
	RETURN false;
}
ELSE
{
	АдресРесурса = STRTRANC(АдресРесурса,"<message>", ТЕКСТСООБЩЕНИЯ);
}

ИМЯОТПРАВИТЕЛЯ = "";
IF (TYPE("_СМСРУИМЯОТПРАВИТЕЛЯ") == "C")
	ИМЯОТПРАВИТЕЛЯ = _СМСРУИМЯОТПРАВИТЕЛЯ;
	
//если не указан отправитель, то не заполняем данный параметр
IF (ПУСТО(ИМЯОТПРАВИТЕЛЯ))
	АдресРесурса = STRTRANC(АдресРесурса,"&from=<from>","");
ELSE
	АдресРесурса = STRTRANC(АдресРесурса,"<from>",ИМЯОТПРАВИТЕЛЯ);
	
ОТВЕТ = ITIDASENDER.СМСРУ_HTTPPOST(АдресСервераСМС, АдресРесурса, "");

IF (!ПУСТО(ОТВЕТ))
	RETURN true;
ELSE
	RETURN false;

IF ( !ЕГАИС.HTTPConnect( ЕГАИССЕРВЕР, ЕГАИСПОРТ, true ) ) {	СООБЩЕНИЕ( "Не удалось подключиться к транспортному модулю. Проверьте параметры соединения (" + ALLTRIM( ЕГАИССЕРВЕР ) + ":" + ALLTRIM( ЕГАИСПОРТ ) + ")." );	RETURN false;}СообщениеОбОшибке	= "";ОтветСервера		= ЕГАИС.HTTPGet( "/opt/out", @СообщениеОбОшибке );ЕГАИС.HTTPDisconnect( );// Если вернулся пустой ответ, то это означает ошибкуIF ( ПУСТО( ОтветСервера ) ){	IF ( !ПУСТО( СообщениеОбОшибке ) )		СООБЩЕНИЕ( "При загрузке списка документов, транспортный модуль ЕГАИС вернул собщение об ошибке." + CHR( 13 ) + СообщениеОбОшибке + CHR( 13 ) + HTTPResponse, "Загрузка списка документов" );	ELSE		СООБЩЕНИЕ( "Нет данных для загрузки.", "Загрузка списка документов" );	RETURN false;}_ERRORCODE 			= 0;ErrorMessage		= "Ошибка загрузки списка документов. " + CHR( 13 );ДОБАВИТЬКОНТЕКСТ( "SET FMTONLY ON SELECT CONVERT( char( 250 ), '' ) AS url, CONVERT( char( 250 ), '' ) AS replyid SET FMTONLY OFF", "СписокДокументов" );ЗАГРУЗИТЬ( "СписокДокументов", "XMLSTRING", ОтветСервера, "url" );	IF ( _ERRORCODE < 0 ){	СООБЩЕНИЕ( ErrorMessage + _ERRORDESCRIPTION, "Ошибка", 16 );	RETURN false;}/* Аналогично загружаем список исходящих документов, для удаления, при получении ответа */ДОБАВИТЬКОНТЕКСТ( "SET FMTONLY ON SELECT CONVERT( char( 250 ), '' ) AS url, CONVERT( char( 250 ), '' ) AS replyid SET FMTONLY OFF", "СписокИсходящихДокументов" );IF ( ЕГАИС.HTTPConnect( ЕГАИССЕРВЕР, ЕГАИСПОРТ, true ) ) {	ОтветСервера		= ЕГАИС.HTTPGet( "/opt/in", @СообщениеОбОшибке );	ЕГАИС.HTTPDisconnect( );	ЗАГРУЗИТЬ( "СписокИсходящихДокументов", "XMLSTRING", ОтветСервера, "url" );	}ПЕРЕЙТИВНАЧАЛО( "СписокДокументов" );ВЫБРАТЬКОНТЕКСТ( "СписокДокументов" );RETURN true;
